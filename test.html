<html>
<head>
<script type="text/javascript" src="jquery-1.9.1.js"></script>
<script type="text/javascript" src="kiara.js"></script>
<script type="text/javascript">
  function log(msg) {
    $("#console").append("[" + new Date().toLocaleTimeString() + "] " + msg + "\n");
    $("#console").scrollTop(9999999999);
  }

  function runTest() { 
    console.log("Creating context...");
    var context = new KIARA.Context();
    console.log("Context: ", context);
    
    console.log("Opening connection...");
    var conn = new KIARA.Connection(context, "http://localhost/home/kiara/login.idl");
    console.log("Connection: ", conn);
    
    console.log("Creating client func...");
    var login = conn.GenerateClientFunc("opensim.login.login_to_simulator", "...");
    console.log("Client func: ", login);
    
    // TODO(rryk): Fill in login requestion object for testing.
    var loginRequest = { name: {first: "Sergiy", last: "Byelozyorov"} };
    
    console.log("Calling client func with request: ", loginRequest);
    login(loginRequest).callback = function() { console.log("Received response for the client func: ", response); };
  }
</script>
</head>
<body>
  <button onclick="runTest()">Start test</button>
  <pre id="console" style="background-color: black; color: white; height: 500px; overflow: auto"></pre>
</body>
</html>
